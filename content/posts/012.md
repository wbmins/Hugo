---
title: "自动部署Github Actions VS Travis"
date: 2019-03-15
draft: false
tags: ["Hugo","Travis","Github Actions"] #标签
categories: ["生命不息 折腾不止", "折腾博客的那点事"] #分类
featured_image: #顶部图片
description:  #描述
---
- **介绍**
    * [GitHub Actions](https://github.com/features/actions) 是 GitHub 的[持续集成服务](http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html),于2018年10月推出
    * [Travis CI](https://travis-ci.org/)是在线托管的CI服务,用Travis来进行持续集成,不需要自己搭服务器,傻瓜式操作,用起来更方便.最重要的是,它对开源项目是免费的
- **Travis配置**
    * 使用Github账户登录[Travis](https://travis-ci.org/)
    * Github的setting -> Developer setting -> Personal access tokens 创建一个token, Select scopes选项记得选中所有
    * 然后**一定要复制token值,他只会出现一次**
    * 在Travis的setting页面找到自己要自动部署的仓库(存放hugo源码的仓库)
    * 点setting 在Environment Variables添加NAME: GITHUB_TOKEN,VALUE:你刚刚复制token的值
- **Travis部署**
    * 在你的hugo源码项目根目录添加.travis.yml文件
    ```yaml
    language: go
    go:
    - "1.8"  # 指定Golang 1.8
    env:
    global:
    # Github Pages
    - GH_REF: github.com/wbmins/wbmins.github.io
    before_install:
    # 安装依赖
    - sudo apt-get install libstdc++6
    # 安装 hugo （version: v0.54.0）
    - wget -q -O hugo.deb https://github.com/gohugoio/hugo/releases/download/v0.55.6/hugo_extended_0.55.6_Linux-64bit.deb
    - sudo dpkg -i hugo.deb
    install:
    # 运行hugo命令
    - hugo
    script:
    - cd ./public
    - git init
    - git config user.name "wbmins"
    - git config user.email "wbminions@gmail.com"
    - git add .
    - git commit -m "Update Blog By TravisCI With Build $TRAVIS_BUILD_NUMBER"
    # Github Pages
    - git push --force --quiet "https://$GITHUB_TOKEN@${GH_REF}" master:master
    ```
- **Github Actions配置**